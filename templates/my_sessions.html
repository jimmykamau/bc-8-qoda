<div class="uk-width-1-6 uk-height-viewport main-viewport">
	<div class="uk-margin-top uk-margin-large-bottom uk-margin-small">
		<div class="section-title" style="padding-left: 10px;">My Sessions</div>
		<div>
			<div class="uk-width-1-1 nav-sidebar uk-margin-bottom uk-margin-top">

                <ul class="uk-nav" id="list-sessions" data-uk-nav>
			    	<li><a href="">Dashboard</a></li>
			    	<li><a href="">Dashboard</a></li>
			    	<li><a href="">Dashboard</a></li>
			    </ul>

            </div>
			<button class="uk-button" type="button" data-uk-modal="{target:'#modal'}">Create New</button>
		</div>
	</div>
</div>

<div id="modal" class="uk-modal">
    <div class="uk-modal-dialog">
        <a href="" class="uk-modal-close uk-close"></a>
        <h1>Give your new session a nifty name</h1>
        <input type="text" placeholder="New Session" id="new_session_name" />
        <button class="uk-button" type="button" id="create_session">Create</button>
    </div>
</div>

<script type=text/javascript>
  $(function() {
    $('#create_session').bind('click', function() {
    	if (!$('#new_session_name').val()) {
    		UIkit.notify({
	            message : 'Your new session needs a name',
	            timeout : 10000,
	            pos     : 'top-right',
	            status  : 'warning'
	        });
    	}
    	else {
    		$.getJSON($SCRIPT_ROOT + '/create_new_session', {
		    	name: $('#new_session_name').val(),
		    }, function(data) {
		    	UIkit.modal("#modal").hide();
		    	UIkit.notify({
		            message : 'Session '+name+' created successfully',
		            timeout : 10000,
		            pos     : 'top-right',
		            status  : 'success'
		        });
		    });
    	}
    	$.getJSON($SCRIPT_ROOT + '/my_sessions', function(data) {
    		var elements = $();
    		$.each(data, function(key, value) {
    			value.forEach(function(item) {
    				var session_url = '<li><a href="' + $SCRIPT_ROOT + '/sessions/' + item.id + '"><i class="uk-icon-code"></i> ' + item.session_name + '</a></li>'
    				elements = elements.add(session_url);
				});
			});
			$('#list-sessions').empty();
			$('#list-sessions').append(elements);
	    });
    	return false;
    });
    $.getJSON($SCRIPT_ROOT + '/my_sessions', function(data) {
		var elements = $();
		$.each(data, function(key, value) {
			value.forEach(function(item) {
				var session_url = '<li><a href="' + $SCRIPT_ROOT + '/sessions/' + item.id + '"><i class="uk-icon-code"></i> ' + item.session_name + '</a></li>'
    			elements = elements.add(session_url);
			});
		});
		$('#list-sessions').empty();
		$('#list-sessions').append(elements);
    });
  });
</script>